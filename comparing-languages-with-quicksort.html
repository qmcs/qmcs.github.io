<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Comparing Languages with Quicksort</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


    <meta name="twitter:card" content="summary">

    <meta property="og:type" content="article">


    <link href="http://eecs.io/static/images/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="/apple-touch-icon-precomposed.png" rel="apple-touch-icon">

    <link href="//fonts.googleapis.com/" rel="dns-prefetch">
    <link href="//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Open+Sans:700,400&subset=latin,latin-ext" rel="stylesheet">

    <link rel="stylesheet" href="http://eecs.io/theme/css/main.css" />
    <link rel="stylesheet" href="http://eecs.io/theme/css/pygment.css" />
    <link rel="stylesheet" href="http://eecs.io/theme/css/custom.css" />


    <script src="http://eecs.io/theme/js/jquery.min.js"></script>
    <script src="http://eecs.io/theme/js/modernizr.js"></script>

    <script src="http://eecs.io/theme/js/imageLoader.js"></script>
    <script src="http://eecs.io/theme/js/drawer.js"></script>
    <script src="http://eecs.io/theme/js/scripts.js"></script>


        <link href="http://eecs.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="EECS Society Atom Feed" />

  </head>
  <body class="">


    <button class="drawer-button" id="drawer-button" data-action="open-drawer"><i class="fa fa-bars"></i></button>
    <div class="drawer-overlay"></div>
    <nav class="drawer" tabindex="-1">
      <div class="drawer-container">
        <!--.drawer-search(role="search")-->
        <ul class="drawer-list" role="navigation">

          <li class="drawer-list-item">
            <a data-pjax="" href="http://eecs.io/">
              <i class="fa fa-home"></i>Home
            </a>
          </li>

            <li class="drawer-list-item">
              <a data-pjax="" href="http://eecs.io/archives.html">
                <i class="fa fa-file"></i>Blog
              </a>
            </li>
            <li class="drawer-list-item">
              <a data-pjax="" href="http://eecs.io/authors.html">
                <i class="fa fa-file"></i>People
              </a>
            </li>

          <li class="drawer-list-divider"></li>

            <li class="drawer-list-item drawer-list-title">Pages</li>
              <li class="drawer-list-item">
                <a href="http://eecs.io/pages/about.html">
                  <i class="fa fa-file"></i>About
                </a>
              </li>
              <li class="drawer-list-item">
                <a href="http://eecs.io/events/">
                  <i class="fa fa-file"></i>Events
                </a>
              </li>
              <li class="drawer-list-item">
                <a href="http://eecs.io/pages/reproducibility.html">
                  <i class="fa fa-file"></i>Reproducibility
                </a>
              </li>
              <li class="drawer-list-item">
                <a href="http://eecs.io/pages/scientific-coding-workshop.html">
                  <i class="fa fa-file"></i>Scientific coding workshop
                </a>
              </li>
            <li class="drawer-list-divider"></li>


          <li class="drawer-list-item drawer-list-title">Follow</li>
            <li class="drawer-list-item">
              <a data-pjax="" href="https://www.facebook.com/groups/eecssoc/">
                <i class="fa fa-facebook"></i> Facebook
              </a>
            </li>
            <li class="drawer-list-item">
              <a data-pjax="" href="https://twitter.com/EECSSoc">
                <i class="fa fa-twitter"></i> Twitter
              </a>
            </li>

            <li class="drawer-list-divider"></li>
            <li class="drawer-list-item drawer-list-title">Engage</li>
            <li class="drawer-list-item">
              <a target="_blank" href="https://github.com/qmcs/qmcs.github.io">
                <i class="fa fa-code"></i>Source
              </a>
            </li>

          </ul>
        </div>
      </nav>

    <main id="container" role="main" class="container">
      <div class="surface">
        <div class="surface-container">
          <div data-pjax-container class="content">



<section class="wrapper wrapper-post">
  <div class="wrapper-container">
    <article itemscope itemtype="http://schema.org/BlogPosting" role="article" class="post ">
      <section class="post-container">
        <header class="post-header">
<ul class="post-meta-list">
  <li class="post-meta-item">
    <time datetime="2014-04-20T00:00:00" itemprop="datePublished">
      Sun 20 April 2014
    </time>
  </li>
  <li class="post-meta-item">
      <span itemprop="keywords"><a href="http://eecs.io/tag/quicksort.html">Quicksort</a></span>
      <span itemprop="keywords"><a href="http://eecs.io/tag/languages.html">languages</a></span>
      <span itemprop="keywords"><a href="http://eecs.io/tag/speed.html">speed</a></span>
  </li>

    <li class="post-meta-item">
      <a href="http://eecs.io/comparing-languages-with-quicksort.html#disqus_thread">Comments</a>
    </li>

    <li class="post-meta-item">
      <a href="https://github.com/qmcs/qmcs.github.io/edit/pelican/content/articles/015-qsort_lang.md">Edit</a>
    </li>
</ul>            <h1 itemprop="name headline" class="post-title"><a href="http://eecs.io/comparing-languages-with-quicksort.html" itemprop="url" data-pjax title="Comparing Languages with Quicksort">Comparing Languages with Quicksort</a></h1>
          <!--h2 itemprop="about" class="post-subtitle"></h2-->
        </header>
        <aside class="post-side">
          <div class="post-author">
              <a href="http://eecs.io/author/filip-ter.html" class="post-author-avatar">
                <img src="http://eecs.io/static/author_images/filipt.jpg" alt="Filip Ter">
              </a>
            <div class="post-author-info">
              <a href="http://eecs.io/author/filip-ter.html" class="post-author-name">
                Filip Ter
              </a>
              <p class="post-author-bio"><p><a class="reference external" href="http://about.me/filipt">Filip</a> is an undergraduate at QMUL studying Computer Science</p>
</p>
            </div>
          </div>
        </aside>
        <div itemprop="articleBody" class="post-body">
          <p>Language speed is often a major factor when determining how useful a programming language can be. Some applications rely on languages that can execute a large amount of instructions in a short amount of time, and programmers may in some cases use languages which have many unpleasant features, just because they can execute an algorithm faster. It would be interesting to see how some languages would fare when it comes to how long it takes them to execute the same algorithm. </p>
<p></p>
<p>I decided to conduct a comparison of programming languages by using them to implement practically the same task and then timing how long each one would take to execute. For the purposes of this article, a faster program is one which can execute an implementation of an algorithm in less time. The algorithm used was quicksort, which is a well-known sorting algorithm invented by Tony Hoare in 1961.<a href="#thoare"><sup>1</sup></a><a id="thoare_back"></a> It can be implemented recursively, and it works by finding a pivot value in an array, moving all elements smaller than it to one side and the larger ones to the other, this process is repeated on the sub-sections around the pivot until the whole array is sorted.</p>
<p>Following up from my previous article, I thought of using the Mersenne Twister<a href="#mt"><sup>2</sup></a><a id="mt_back"></a> algorithm to generate random 32bit integers that I would then sort using quicksort in 7 different implementations, specifically: C<a href="#c"><sup>3</sup></a><a id="c_back"></a>, C++<a href="#cpp"><sup>4</sup></a><a id="cpp_back"></a>, Java<a href="#java"><sup>5</sup></a><a id="java_back"></a>, Python 3<a href="#py"><sup>6</sup></a><a id="py_back"></a>, Python with PyPy<a href="#py"><sup>6</sup></a><a id="py_back"></a>, Jython<a href="#py"><sup>6</sup></a><a id="py_back"></a>, and PHP<a href="#php"><sup>7</sup></a><a id="php_back"></a>. For the quicksort algorithm, I found a pseudo-code description of it on Wikipedia<a href="#wiki"><sup>8</sup></a><a id="wiki_back"></a>. Using a Java implementation of Mersenne Twister<a href="#mtjava"><sup>9</sup></a><a id="mtjava_back"></a>, I generated 7 files all containing pseudo-random positive 32-bit integers. The files contained 100 to 100 million integers, with each file containing 10 times as many integers as the previous one. Using the description from Wikipedia, I then implemented the algorithm in the languages used in the test, adding functions for reading the numbers from files and printing them for checking.  In the actual test each program was to read the contents of the file, store them in an array, sort the array using quicksort, and finally print a message that the array was sorted. The time of execution would be measured by the Bash time function.<a href="#bashtime"><sup>10</sup></a><a id="bashtime_back"></a> This was mainly done so that the same function would be measuring all programs, as using timing from different languages can produce unreliable results. In order to obtain more precise results each instance of sorting was done 5 times, and the average time was taken. In an effort to automate the task more, I wrote a Bash script that would run each instance of the program 5 times, time the execution for each run, and then calculate the average of the times and write it to a CSV table.<a href="#bashscript"><sup>11</sup></a><a id="bashscript_back"></a></p>
<p>As for my initial expectations, they coincided with the usual belief about these languages. I expected the compiled languages(C, C++, Java) to be fast, and the interpreted languages to be slower. This basically follows common knowledge about these languages, but the point of the test is to see how they would actually compare, and how significant the differences would be. When it comes to the Python variants I thought that PyPy would be the fastest out of them as it was designed specifically to make python code run faster, and uses just-in-time(jit) compilation. </p>
<ul>
<li>The table which contains the average times for all runs of each program, on the five largest files.</li>
</ul>
<table>
    <thead>
        <tr>
            <th></th>
            <th colspan="5" align="center">Seconds taken to sort array</th>
        </tr>
        <tr>
            <th>Language</th>
            <th>10^4 integers</th>
            <th>10^5 integers</th>
            <th>10^6 integers</th>
            <th>10^7 integers</th>
            <th>10^8 integers</th>
        </tr>
    </thead>
    <tbody> 
<tr><td>C</td><td>0.0045</td><td>0.0235</td><td>0.2115</td><td>2.2315</td><td>23.4800</td></tr>
<tr><td>C++</td><td>0.0040</td><td>0.0245</td><td>0.2130</td><td>2.2295</td><td>23.4535</td></tr>
<tr><td>Java</td><td>0.2550</td><td>0.3735</td><td>1.4050</td><td>9.9225</td><td>95.5925</td></tr>
<tr><td>Python 3</td><td>0.0810</td><td>0.4890</td><td>5.6820</td><td>73.1470</td><td>989.4360</td></tr>
<tr><td>PyPy2.2.1</td><td>0.1320</td><td>0.2240</td><td>1.5340</td><td>9.1640</td><td>94.2570</td></tr>
<tr><td>PHP</td><td>0.1210</td><td>0.6650</td><td>7.5990</td><td>96.5950</td><td>1198.0580</td></tr>
<tr><td>Jython</td><td>2.3460</td><td>2.8450</td><td>9.5880</td><td>88.1560</td><td>1585.4810</td></tr>
</tbody>
</table>

<ul>
<li>A graph which shows the comparison of how long each language took to sort N number of ints, the three largest files are considered</li>
</ul>
<p><img alt="Graph comparing time taken to sort 100 million integers for 5 languages" src="static/images/lang_graph.png" /></p>
<p>The results of this test agree with the general belief that interpreted languages tend to be far slower than compiled ones. C and C++ were almost the same, which could be partly because the same IO libraries were used for those languages. PyPy turned out to be practically 10 times faster than CPython, which was much more than I had expected. This could be because the jit compilation starts making a greater difference with a greater number of integers. Jython was the slowest out of all, which certainly not surprising since it is running Python code on top of the Java Virtual Machine. </p>
<p>While this test showed interesting outcomes, it leaves many things to be improved. One of these is the heavy use of libraries for file I/O, this means that the test was also measuring the implementation of the libraries, which could have affected the results. For example if a file I/O library in Java was better written than the other ones, it could give that language a skewed advantage. Another issue with this test is that it only considers languages which have their syntax influenced by C, and have many major similarities. It would have been interesting to conduct the test while including languages, which are less similar to one another, for example some of the functional languages.</p>
<p>If anything this little comparison shows how useful it is to have knowledge of the features of different programming languages. For example, Python is a language which is really pleasant to code in, and allows for elegant solutions, however it would not be a good idea to use it in performance-intensive applications. Knowing about differences like this between different programming languages will allow one to make sensible choices when having to implement a solution to some problem. After all the programming languages we have are just tools, which can be used to implement some solution that the programmer comes up with.</p>
<h4>Footnotes</h4>
<p><a id="thoare">1</a>: <a href="http://cs.stanford.edu/people/eroberts/courses/soco/projects/2008-09/tony-hoare/quicksort.html">http://cs.stanford.edu/people/eroberts/courses/soco/projects/2008-09/tony-hoare/quicksort.html</a> <a href="#thoare_back">&#x21a9;</a></p>
<p><a id="mt">2</a>: <a href="http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html">http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/emt.html</a> <a href="#mt_back">&#x21a9;</a></p>
<p><a id="c">3</a>: My C implementation of Quicksort (compiled with gcc): <a href="https://github.com/Filip-Ter/QSortTest/blob/master/cmplang/src/QsortC.c">https://github.com/Filip-Ter/QSortTest/blob/master/cmplang/src/QsortC.c</a> <a href="#c_back">&#x21a9;</a></p>
<p><a id="cpp">4</a>: My C++ Quicksort implementation (compiled with g++): <a href="https://github.com/Filip-Ter/QSortTest/blob/master/cmplang/src/Qsort.cc">https://github.com/Filip-Ter/QSortTest/blob/master/cmplang/src/Qsort.cc</a> <a href="#cpp_back">&#x21a9;</a></p>
<p><a id="java">5</a>: My Java Quicksort implementation, complied and executed with jdk 7u51: <a href="https://github.com/Filip-Ter/QSortTest/blob/master/cmplang/src/Qsort.java">https://github.com/Filip-Ter/QSortTest/blob/master/cmplang/src/Qsort.java</a> <a href="#java_back">&#x21a9;</a></p>
<p><a id="py">6</a>: My Python Quicksort implementation, the same source file was used for Python 3.3.4, PyPy, and Jython: <a href="https://github.com/Filip-Ter/QSortTest/blob/master/cmplang/src/Qsort.py">https://github.com/Filip-Ter/QSortTest/blob/master/cmplang/src/Qsort.py</a> <a href="#py_back">&#x21a9;</a></p>
<p><a id="php">7</a>: My PHP Quicksort implementation: <a href="https://github.com/Filip-Ter/QSortTest/blob/master/cmplang/src/Qsort.php">https://github.com/Filip-Ter/QSortTest/blob/master/cmplang/src/Qsort.php</a> <a href="#php_back">&#x21a9;</a></p>
<p><a id="wiki">8</a>:The pseudocode description of the algorithm that is implemented in my programs: <a href="http://en.wikipedia.org/wiki/Quicksort#In-place_version">http://en.wikipedia.org/wiki/Quicksort#In-place_version</a> <a href="#wiki_back">&#x21a9;</a></p>
<p><a id="mtjava">9</a>: Java implementation of Mersenne Twister: <a href="http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/VERSIONS/JAVA/MTRandom.java">http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/VERSIONS/JAVA/MTRandom.java</a> <a href="#mtjava_back">&#x21a9;</a></p>
<p><a id="bashtime">10</a>: The bash built-in time function was used, so not /usr/bin/time (GNU time) <a href="#bashtime_back">&#x21a9;</a></p>
<p><a id="bashscript">11</a>: The script used to run and time the programs: <a href="https://github.com/Filip-Ter/QSortTest/blob/master/TestTime.sh">https://github.com/Filip-Ter/QSortTest/blob/master/TestTime.sh</a> <a href="#bashscript_back">&#x21a9;</a></p>
        </div>
        <footer class="post-footer">
          <div itemprop="author" itemscope itemtype="http://schema.org/Person" class="post-author">
              <a href="http://eecs.io/author/filip-ter.html" class="post-author-avatar">
                <img src="http://eecs.io/static/author_images/filipt.jpg" alt="Filip Ter">
              </a>
            <div class="post-author-info">
              <h4 class="post-footer-heading">Written By</h4>

              <a href="http://eecs.io/author/filip-ter.html" itemprop="url" class="post-author-name">
                <span itemprop="name">Filip Ter</span>
              </a>

              <p itemprop="description" class="post-author-bio"><p><a class="reference external" href="http://about.me/filipt">Filip</a> is an undergraduate at QMUL studying Computer Science</p>
</p>

              <p class="post-author-website">
                <a rel="nofollow" href="http://about.me/filipt">
                  http://about.me/filipt
                </a>
              </p>

                <p class="post-info">
                  <b class="post-info-title">Published in</b>
                  <a href="http://eecs.io/category/languages.html">
                    languages
                  </a>
                </p>

              <p class="post-info">
                <b class="post-info-title">Published on</b>
                <time datetime="2014-04-20T00:00:00" class="post-date">
                  Sun 20 April 2014
                </time>
              </p>

            </div>
          </div>
          <div class="post-social">
            <h4 class="post-footer-heading">Spread the word</h4>
            <a href="#" data-action="share-twitter"><i class="fa fa-fw fa-lg fa-twitter"></i></a>
            <a href="#" data-action="share-facebook"><i class="fa fa-fw fa-lg fa-facebook"></i></a>
            <a href="#" data-action="share-gplus"><i class="fa fa-fw fa-lg fa-google-plus"></i></a>
          </div>
        </footer>
      </section>

  <section class="post-comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_identifier = "comparing-languages-with-quicksort.html";
      var disqus_url = "http://eecs.io/comparing-languages-with-quicksort.html";
      (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://qmcs.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
  </section>

    </article>

<footer class="footer" role="contentinfo">
  <small>
    <p>
      EECS Society | Queen Mary University of London |
        <a href="https://github.com/qmcs/qmcs.github.io/graphs/contributors"> Contributors
    </p>
    <p>
      <a href="https://github.com/qmcs/pelicanium">Pelicanium</a>, a theme based on
      <a href="http://ghostium.oswaldoacauan.com/">Ghostium Theme</a>.
      Proudly powered by  <a href="http://getpelican.com/">Pelican</a>.
    </p>
  </small>
</footer>
  </div>
</section>

          </div>
        </div>
      </div>
    </main>

    <script src="http://eecs.io/theme/js//56c2364f.foot-scripts.min.js"></script>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-49253245-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'qmcs';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

  </body>
</html>